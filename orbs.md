# 1. orbs

Operational Research and Business Statistics

> å¦‚æœè¦å¿«é€Ÿæé«˜è‡ªå·±çš„ç¼–ç¨‹æ°´å¹³çš„è¯ï¼Œä½ å¿…é¡»æ€»æ˜¯å»åšä¸€äº›ä½ åšå¾—å‡ºæ¥ï¼Œä½†æ˜¯éš¾åº¦å¤§åˆ°åªè¦å†éš¾ä¸€ç‚¹ç‚¹ä½ å°±åšä¸å‡ºæ¥çš„äº‹æƒ…ã€‚å†è¿™ä¹ˆåšæŒå¥½äº›å¹´ä¹‹åï¼Œè‚¯å®šä¼šè¿›å…¥é«˜æ‰‹çš„è¡Œåˆ—ã€‚

## 1.1. Courses

- Simulation Modelling
- Managing Organisational Performance
- Actuarial Statistics
- Risk and Portfolio Management
- Applied Multivariate Analysis
- Prescriptive Analytics for Decision Making
- Business Statistics with R
- Machine Learning and Forecasting
- Big Data Analytics and Visualisation
- Applied Time Series

# 2. Zen of Code

## 2.1. Principle

- Design First
    - Pseudocode code
    - Process diagram
- Never optimize first
- Function Based
- Class Based
- Know what you expect
- Use debug tool
- Know classic algorithm. 
- Use already exist tool or function instead of recreate again. 
- Never use abs path. 
- Design data structure first at Data analysis
- Use parameter name to call a self defined function.
- Keep raw data or treatable data

## 2.2. Use camelCase for name

camelCase is good. Use lower camelCase for variant, and upper CamelCase for function/class.

## 2.3. Use Tidy Data for output data

Tidy data is an alternate name for the common statistical form called a model matrix or data matrix. A data matrix is defined in [1] as follows:

A standard method of displaying a multivariate set of data is in the form of a data matrix in which rows correspond to sample individuals and columns to variables, so that the entry in the ith row and jth column gives the value of the jth variate as measured or observed on the ith individual.

## 2.4. Process data with proper tools before import

Use tools like Visual Studio Code, Python, Excel or others to make data proper to use before importing to code.

## 2.5. Always assume data is not clean

So check every data before really analysis, especially data type and NA.

# 3. Tools

## 3.1. Google Scholar

The best way to find a Text is Google Scholar. The `Cite` function can give you the best choice.

## 3.2. Matlab

Dear Msc students,
Here is the link for you to install the Matlab (you need to sign in for the Mathworks first, I think):

https://ww2.mathworks.cn/en/academia/tah-portal/hong-kong-baptist-university-40738596.html

During the installation, you will be asked to select the toolbox needed. A list of them will be provided 
to you. But we may not be able to have them all. A simple solution is just following the default.
Best,
Li-Zhi

# 4. Statistics

## 4.1. Diagram

### 4.1.1. å‡½æ•°æ›²çº¿

æç¬‘æ¥å…ˆç”Ÿã€Šæ–°ç”Ÿâ€”â€”ä¸ƒå¹´å°±æ˜¯ä¸€è¾ˆå­ã€‹é‡Œç¬¬ä¸€ç¯‡æ–‡ç« å°±æ˜¯ã€Œäººç”Ÿæœ€é‡è¦çš„æ¦‚å¿µï¼šå¤åˆ©ã€ï¼Œç”¨å¾ˆé•¿çš„ç¯‡å¹…è®²è¿°äº†å¤åˆ©çš„æ¦‚å¿µã€‚å¤åˆ©æ˜¯ä¸ªçº¯æ•°å­¦æ¦‚å¿µï¼Œå…¬å¼ä¸º

![](assets/compound-interest-formula.png)

æ–‡å­—ä¹Ÿå¥½ï¼Œæ•°å­—ä¹Ÿç½¢ï¼Œè™½ç„¶å¯ä»¥ç²¾å‡†çš„è¡¨è¿°å‡ºå…¶æ¦‚å¿µï¼Œä½†åœ¨ç›´è§‚æ€§ä¸Šæ€»æ˜¯ä¼šå·®é‚£ä¹ˆä¸€ç‚¹ç‚¹ã€‚è¿™æ—¶å€™å‡½æ•°æ›²çº¿å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚å¤åˆ©æ›²çº¿ç›´æ¥äº†å½“çš„è¯´æ˜äº†éšç€æ—¶é—´çš„å¢é•¿ï¼Œæ”¶ç›Šä¼šä»¥æå¿«çš„é€Ÿåº¦å¢é•¿è¿™ä¸ªæ¦‚å¿µï¼Œä½¿å…¶æå…·å†²å‡»æ€§ã€‚

![](assets/compound-interest.png)

å…¶å®å›æƒ³ä¸€ä¸‹ä¸­å­¦æ•°å­¦å°±å¯ä»¥çŸ¥é“ï¼Œè§£æå‡ ä½•å°±æ˜¯åœ¨ç”¨å›¾åƒæ¥è¯´æ˜å‡½æ•°ã€‚å„ç§å‡½æ•°éƒ½å¯ä»¥åœ¨åæ ‡ç³»é‡Œç”¨ä¸€æ¡æ›²çº¿æˆ–çº¿æ®µæ¥è¡¨ç¤ºï¼Œæˆ‘ä»¬ç”¨å›¾åƒå¯ä»¥æ˜ç¡®çš„çœ‹å‡ºå˜åŒ–è¶‹åŠ¿ï¼Œæ±‚è§£çš„è¿‡ç¨‹å°±æ˜¯å¯»æ‰¾æ›²çº¿äº¤ç‚¹çš„è¿‡ç¨‹â€¦â€¦å‡½æ•°æ›²çº¿æ˜¯å¸®åŠ©æˆ‘ä»¬ç†è§£å¤æ‚æ¯ç‡¥çš„æ•°å­¦æ¦‚å¿µçš„ä¸€ä¸ªæé‡è¦çš„æ­¦å™¨ã€‚

ç”Ÿæ´»ä¸­èƒ½ç”¨åˆ°çº¯ç†è®ºçš„æ•°å­¦å‡½æ•°çš„åœ°æ–¹ä¸ä¼šå¤ªå¤šï¼Œä½†æ¯æ¬¡é‡åˆ°çš„æ—¶å€™ï¼Œéƒ½ä¸å¦¨ç”»ä¸€æ¡å‡½æ•°æ›²çº¿è¯•è¯•ã€‚åªè¦ç»™å‡ºå‡½æ•°å®šä¹‰ï¼Œå¾ˆå¤šè®¡ç®—æœºè½¯ä»¶éƒ½èƒ½éå¸¸å®¹æ˜“çš„ç»˜åˆ¶å‡ºæ›²çº¿ã€‚SpeQã€MathCAD ç­‰è½¯ä»¶éƒ½éå¸¸å¥½ç”¨ã€‚

ä»¥ä¸Šè¯¸å·¥å…·ï¼Œå‡æ»¡è¶³å…è´¹ã€è·¨å¹³å°çš„è¦æ±‚ï¼Œå¯æ»¡è¶³ç»å¤§å¤šæ•°è¦æ±‚ã€‚ä»¥åä¸ç”¨å†åœ¨æ‰¾åˆ¶å›¾è½¯ä»¶ä¸Šæµªè´¹æ—¶é—´äº†ã€‚

### 4.1.2. æ€ç»´å¯¼å›¾

æ€ç»´å¯¼å›¾çš„ä¸¤ç§ä¸»è¦ç”¨æ³•

- æŠŠé—®é¢˜æ”¾ä¸­å¿ƒï¼Œåˆ†æ•£æ€è€ƒï¼›
- æŠŠç»“è®ºæ”¾ä¸­å¿ƒï¼Œåˆ†æ•£è§£é‡Šï¼›

åˆ†åˆ«å¯¹åº”æ€è€ƒå’Œé˜è¿°ã€‚

### 4.1.3. æ•£ç‚¹å›¾

### 4.1.4. æŠ˜çº¿å›¾

### 4.1.5. æ¡å½¢å›¾

### 4.1.6. æ°´å¹³æ¡å½¢å›¾

### 4.1.7. å †å æ¡å½¢å›¾

### 4.1.8. ç»´æ©å›¾

### 4.1.9. é›·è¾¾å›¾

### 4.1.10. æ³¨æ„äº‹é¡¹

1. é¿å…é¥¼å›¾ã€‚é‚ªæ¶çš„é¥¼å›¾ï¼›
2. é¿å…å¤ªå¤šé¢œè‰²ã€‚å¯èƒ½çš„æƒ…å†µä¸‹åªç”¨ä¸¤åˆ°ä¸‰ç§é¢œè‰²ï¼›
3. ç®€æ´æ˜¯ç¾ã€‚å»é™¤ä¸€åˆ‡å¯å»é™¤çš„å…ƒç´ ï¼Œè¯¸å¦‚åæ ‡è½´æ ‡ã€ç½‘æ ¼çº¿ç­‰ï¼›

# 5. Multivariate Analysis

## 5.1. Confidence Region

How to determine a confidence region from sample data?

Hotelling's T2:

$$
n(\overline X-\mu_0)'S^{-1}(\overline X-\mu_0)\leq T^2 \sim \frac{(n-1)p}{n-p}F_{p, n-p} 
$$

# 6. Risk

## 6.1. Rate Risk

### 6.1.1. Duration

Duration is generally defined as Macaulay's Duration, which is

$$
D = \sum_{i=1}^n t_i(\frac{v_i}{B})
$$

Where

$$
v_i = c_ie^{-t_iy}
$$

- $c_i$: return cash flow;
- $t_i$: time period;
- $y$: continuous yield;

### 6.1.2. Modified Duration

If $y$ is not continuous rate, duration should be modified by $1+y/m$, where $y$ is rate by period, and $m$ is conversion time. So we get

$$
D_m = \frac{D}{1+y/m}
$$

### 6.1.3. Dollar Duration

Dollar duration is defined as thed product of its duration and its price. So we get

$$
D_\$=DB=-\frac{\Delta B}{\Delta y}\frac{1}{B}B=-\frac{\Delta B}{\Delta y} = -\frac{\partial B}{\partial y}
$$

Whereas duration relates proportional changes in a bondâ€™s price to its yield, dollar duration relates actual changes in the bondâ€™s price to its yield. Dollar duration is similar to the delta measure.

## 6.2. Credit Risk

$$
V(t) = P(T>t)
$$

$$
Q(t)=P(T\leq t)=1-V(t)
$$

Where

- $T$: The time of default of a given bond;
- $V(t)$: The cumulative probability of the bond surviving to time t;
- $Q(t)$: The probability of default by time t.

### 6.2.1. Hazard Rate

TABLE 19.1 Average Cumulative Default Rates (%), 1970â€“2013

| Time(years) |    1   |    2   |    3   |    4   |    5   |    7   |   10   |   15   |   20   |
|:-----------:|:------:|:------:|:------:|:------:|:------:|:------:|:------:|:------:|:------:|
|     Aaa     |  0.000 |  0.013 |  0.013 |  0.037 |  0.104 |  0.241 |  0.489 |  0.910 |  1.073 |
|      Aa     |  0.022 |  0.068 |  0.136 |  0.260 |  0.410 |  0.682 |  1.017 |  1.871 |  3.167 |
|      A      |  0.062 |  0.199 |  0.434 |  0.679 |  0.958 |  1.615 |  2.759 |  4.583 |  7.044 |
|     Baa     |  0.174 |  0.504 |  0.906 |  1.373 |  1.862 |  2.872 |  4.623 |  8.306 | 11.969 |
|      Ba     |  1.110 |  3.071 |  5.371 |  7.839 | 10.065 | 13.911 | 19.323 | 28.500 | 35.410 |
|      B      |  3.904 |  9.274 | 14.723 | 19.509 | 23.869 | 31.774 | 40.560 | 50.275 | 55.892 |
|    Caa-C    | 15.894 | 27.003 | 35.800 | 42.796 | 48.828 | 56.878 | 66.212 | 73.152 | 74.946 |

Source: Moody's

We can get Q(t) from this table.

Define

$$
\begin{aligned}
     \lambda(t)&=\frac{P(t<T\leq t+\Delta t|T>t)}{\Delta t} \\&= \frac{V(t)-V(t+\Delta t)}{V(t)}\\&=-\frac{dV(t)}{dt}\frac{1}{V(t)}
\end{aligned}
$$

so

$$
V(t)=e^{-\int_0^t\lambda(\tau)d\tau}
$$

or

$$
e^{-\int_0^t\lambda(\tau)d\tau}=1-Q(t)
$$

Where

- $\lambda(t)$: Default probability in the t-th year, given no early default. So it is a conditional probability.

#### 6.2.1.1. Estimate

We can use credit spread rate to estimate $\lambda$

$$
\bar \lambda = \frac{s(T)}{1-R}
$$

Where

- $\bar \lambda$: average hazard rate between time 0 and time T;
- R: recovery rate;
- s(T): credit spread for a maturity of T;

#### 6.2.1.2. Estimate by Risk rate and Yield rate

Suppose that a five-year corporate bond with a principal of 100 provides a coupon of 6% per annum (paid semiannually) and that the yield on the bond is 7% per annum (with continuous compounding). The yield on a similar risk-free bond is 5% (again with continuous compounding).Th yields imply that the price of the corporate bond is 95.34 and the price of the risk-free bond is 104.09.The expected loss from default over the five-year life of the bond is therefore 104.09â€“95.34, or $8.75. For simplicity, we suppose that the unconditional probability of default per year is the same each year and equal to Q. Furthermore, we assume defaults can happen only at times 0.5, 1.5, 2.5, 3.5, and 4.5 years (immediately before coupon payment dates). Risk-free rates are assumed to be 5% (with continuous compounding) for all maturities and the recovery rate (i.e., recovery as a percent of principal) is assumed to be 40%. (The analysis can be extended so that defaults happen more frequently.)

So we get

- p = 100, the principal;
- rc = 6%, coupon rate  per annum (paid semiannually);
- y = 7%, yield per annum (with continuous compounding);
- rfb = 5%, risk-free bond rate (again with continuous compounding);
- rf = 5%, Risk-free rates(with continuous compounding) for all maturities
- R = 40$, the recovery rate (i.e., recovery as a percent of principal)
- Q: unconditional probability of default per year, the same each year;

If there is no default, we get the therotical cash flow

```
    100  3           3               3       ^
     |   ^   ^   ^   ^   ^   ^   ^   ^   ^   |
     |   |   |   |   |   |   |   |   |   |   |
     |   |   |   |   |   |   |   |   |   |   |
+----v---+---+---+---+---+---+---+---+---+---+->
     0  0.5     1.5     2.5          4       5
```

the outflow before 5 year is

$$
c = 100 \times 6\%/2=3
$$

Based on the yield, we get the present value of cooperate bond

$$
P_y=3e^{-0.07\times0.5}+3e^{-0.07\times 1.0} + \cdots + 3e^{-0.07\times 4.5} + 103\times e^{-0.07\times 5} = 95.34
$$

and the price of the risk-free bond is 104.09.

$$
P_R=3e^{-0.05\times0.5}+3e^{-0.05\times 1.0} + \cdots + 3e^{-0.05\times 4.5 }+ 103\times e^{-0.05\times 5} = 104.09
$$

The expected loss from default over the five-year life of the bond is therefore $104.09â€“95.34 = 8.75$.

consider the 3.5-year. The expected value of the default-free bond at time 3.5 years (calculated using the forward risk-free interest rates) is

$$
3+ 3e^{âˆ’0.05Ã—0.5}+ 3e^{âˆ’0.05Ã—1.0} + 103e^{âˆ’0.05Ã—1.5} = 104.34
$$

The reason why we have 3 in the equation is that, we are now calculating the present value of risk-free bond. Now we are standing at the 3.5 year point, the bond does not default, so now we can get a 3$ coupon.

So the loss given default should be this value minus the recovery amout

$$
104.34 - 40\%*100=64.34
$$

and the present value of the loss is

$$
64.34\times e^{-0.05\times 3.5} = 54.01
$$

So the expected loss for this time point is $54.01Q$.

Calculate this process for all the period, we get the following table

| Time (yrs) | Def. Prob. | Recovery Amount($) | Default-Free Value($) | Loss($) | Discount Factor | PV of Expected Loss($) |
|:----------:|:----------:|:------------------:|:---------------------:|:-------:|:---------------:|:----------------------:|
|     0.5    |      Q     |         40         |         106.73        |  66.73  |      0.9753     |         65.08Q         |
|     1.5    |      Q     |         40         |         105.97        |  65.97  |      0.9277     |         61.20Q         |
|     2.5    |      Q     |         40         |         105.17        |  65.17  |      0.8825     |         57.52Q         |
|     3.5    |      Q     |         40         |         104.34        |  64.34  |      0.8395     |         54.01Q         |
|     4.5    |      Q     |         40         |         103.46        |  63.46  |      0.7985     |         50.67Q         |

In summary, we can get the PV of expected loss 288.48Q. The value of the expected loss is 8.75, as calculated before. So we get

$$
Q = \frac{8.75}{288.48}=3.03\%
$$

So in summary, we have the following process.

1. Based on coupon rate, calculate the cash flow;
2. Based on yield rate, get the present value of the bond $P_y$;
3. Based on risk-free bond rate, get the present value of the risk-free bond $P_R$;
4. Get the expected loss $L_E = P_R - P_y$ as the difference of the two present value;
5. For every coupon return period, get expected value of the default-free bond present value $P_{Ri}$. Pay attention to the first coupon value;
6. Get the loss given default for every peroid by $L_{Ei} = P_{Ri} - F\times R$, where F is the face value, R is the recover rate;
7. Get the present value of every $L_{Ei}$;
8. Sum all the present value of expected loss $L_{Ei}$ for every i in coupon period as $S_E = \sum_1^nL_{Ei}$;
9. Set the default probability to be Q, the total expected loss will be $Q\times S_E$, which equal to the $L_E$ we get in setp 4. So $Q = {L_E}/{S_E}$.

#### 6.2.1.3. by equity price

Merton proposed option's Black Scholes formula for bond, leads to

- $V_0$: Value of companyâ€™s assets today.
- $V_T$: Value of companyâ€™s assets at time T.
- $E_0$: Value of companyâ€™s equity today.
- $E_T$: Value of companyâ€™s equity at time T.
- $D$: Amount of debt interest and principal due to be repaid at time T.
- $\sigma_V$: Volatility of assets (assumed constant).
- $\sigma_E$: Instantaneous volatility of equity.

Then we get

$$
E_0 = V_0N(d_1) - De^{-rT}N(d_2)
$$

Where

$$
d_{1}=\frac{\ln \left(V_{0} / D\right)+\left(r+\sigma_{V}^{2} / 2\right) T}{\sigma_{V} \sqrt{T}}
$$

$$
d_2 = d_1 - \sigma_V \sqrt{T}
$$

$V_0$ and $\sigma_V$ are needed but not observable. Using a lemma called Ito's lemma, we can get

$$
\sigma_E E_0 = \frac{\partial E}{\partial V}\sigma_V V_0
$$

Here $\partial Eâˆ•\partial V$ is the delta of the equity, and$ $\partial Eâˆ•\partial V = N(d_1)$(Why? complex. Need not to know). So we get

$$
\sigma_E E_0 = N(d_1)\sigma_V V_0
$$

Then we can get parameters to solve it.

### 6.2.2. WCDR

Define the â€œworst case default rate,â€ WCDR(T,X), as the default rate (i.e., percentage of loans defaulting) during time That will not be exceeded with probability X%. (In many applications T will be one year.)

After some deduce, we can get

$$
\mathrm{WCDR}(T, X)=N\left(\frac{N^{-1}(\mathrm{PD})+\sqrt{\rho} N^{-1}(X)}{\sqrt{1-\rho}}\right)
$$

Where

- $T$: default time(year);
- $X$: not default probability percentage;
- $\rho$: $corr(x_i, x_j)$;
- $x_i$: normalized default z-score for normal distribution, which is $x_i = N^{-1}(Q_i(t_i))$;

so

$$x_i \sim N(0, 1)$$

### 6.2.3. Credit VaR

A rough estimate of the credit VaR under an ğ‘‹% confidence level is 

$$\mathrm{VaR} = ğ¿ \cdot (1 âˆ’ ğ‘…) \cdot ğ‘Šğ¶ğ·ğ‘…(ğ‘‡, ğ‘‹)$$

Where

- ğ¿ is the size of the loan portfolio
- ğ‘… is the recovery rate

## 6.3. Credit Default Swaps(CDS)

            Payment for protection
Default   +------------------------> Default
Protection                           Protection
Buyer, A  <------------------------+ Seller, B
              Payoff if default by
              reference entity

- Payoff = 1 - R
- R: recovery rate;

### 6.3.1. Estimate the CDS rate

### 6.3.2. Implied default probability

Key point for the above question: Payment = Payoff

### 6.3.3. A

# 7. Actuarial

## 7.1. Interest

### 7.1.1. Fix invest with a initial amount

$$
F_{n}=F_{0}(1+i)^{n}+\sum_{k=1}^{n} r_{k}(1+i)^{n-k}
$$

### 7.1.2. Discount Factor

$$
v = \frac{1}{1+i}
$$

Used to discount future value to present. So the previous formula for fix invest can be rewritten as

$$
v^nF_{n}=F_{0}+\sum_{k=1}^{n} r_{k}v^k
$$

### 7.1.3. Interest in Advance

discount or interest-in-advance, and the corresponding rate is called discount rate.

For discount, we have

$$
\frac{1}{1-d}=1+i
$$

Which leads to

$$
d = \frac{i}{1+i}
$$

### 7.1.4. Nominal Interest Rate

$$
\left(1+\frac{i^{(m)}}{m}\right)^{m}=1+i
$$

$$
\left(\frac{1}{1-d^{(m)} / m}\right)^{m}=1+i
$$

Then we have

$$
\frac{1}{d^{(m)}} = \frac{1}{m} + \frac{1}{i^{(m)}}
$$

### 7.1.5. Continuous Compounding

If $m\rightarrow \infty$ in nominal interest rate, we get continuous compounding rate $\delta$

$$
\lim_{m\rightarrow\infty} d^{(m)} = \lim_{m\rightarrow\infty} i^{(m)} = \delta
$$

and

$$
e^{\delta} = 1+i
$$

## 7.2. Perpetuity

### 7.2.1. Perpetuity Due

$$
\ddot a_{\infty \rceil} = \frac{1}{d}
$$

Usage: If annual payment C is made, the present value will be $C\ddot a_{\infty \rceil}$.

### 7.2.2. Immediate Perpetuity

$$
a_{\infty \rceil} = \frac{1}{i}
$$

Usage: If annual payment C is made, the present value will be $Ca_{\infty \rceil}$.

### 7.2.3. Pay 1/m once and m times a year

$$
\ddot{a}_{\infty\rceil}^{(m)} = \frac{1}{d^{(m)}}
$$

Usage: If payment of ğ¶/ğ‘š are made ğ‘š times each year and the first payment is made at the start of year, then we have the present value

$$
C\ddot{a}_{\infty\rceil}^{(m)} = \frac{C}{d^{(m)}}
$$

in total.

If the ï¬rst payment of 1/ğ‘š at time 1/ğ‘š, the present value is denoted as 
$a_{\infty \rceil}^{(m)}$ and given by

$$
a_{\infty \rceil}^{(m)} = \frac{1}{i^{(m)}}
$$

### 7.2.4. Continuous Perpetuity

If $m\rightarrow\infty$, we have continuous perpetuity

$$
\bar a_{\infty\rceil} = \frac{1}{\delta}
$$

## 7.3. Annuity

An annuity consists of a sequence of payments in a limited duration. It can be considered as the difference of two perpetuity.

### 7.3.1. Annuity-due

$$
\ddot{a}_{n\rceil} = \frac{1-v^n}{d}
$$

### 7.3.2. Immediate Annuity

$$
a_{n\rceil} = \frac{1-v^n}{i}
$$

### 7.3.3. ğ‘š payments of $ 1/ğ‘š per year for ğ‘› years

$$
\ddot{a}_{n\rceil}^{(m)} = \frac{1-v^n}{d^{(m)}}
$$

$$
a_{n\rceil} = \frac{1-v^n}{i^{(m)}}
$$

## 7.4. Lifetime model

- ğ‘¥: a person aged ğ‘¥.
- ğ‘‡ is the remaining lifetime, or future lifetime
- ğ‘¥ + ğ‘‡: Age at death of the person

All notations are starting from age x.

### 7.4.1. Probability density function of ğ‘‡

Define $g(t)$ as the probability density function of ğ‘‡, then we have

$$
ğ‘”(ğ‘¡) ğ‘‘ğ‘¡ = ğ‘ƒ (ğ‘¡ < ğ‘‡ < ğ‘¡ + ğ‘‘ğ‘¡)
$$

### 7.4.2. Probability distribution function of ğ‘‡

$$
ğº(ğ‘¡)= ğ‘ƒ(ğ‘‡ \leq ğ‘¡) = \int_0^tg(\tau)d\tau
$$

### 7.4.3. Extension of life probability

Define

$$
_tq_x=G(t)
$$

as the probability of dying within t years. Then we have

$$
_tp_x=1-{}_tq_x
$$

as the probability of survive at least ğ‘¡ years.

Define

$$
_{s|t}q_x={}_{s+t}q_x-{}_sq_x
$$

as the probability of survive s years and then die within t years.

Define

$$
_tp_{x+s} = \frac{P(T>s+t)}{P(T>s)}=\frac{1-G(s+t)}{1-G(s)}
$$

as the conditional probability that a person will survive another 
ğ‘¡ years, after having attained the age ğ‘¥ + ğ‘ .

Define

$$
_tq_{x+s} = 1-{}_tp_{x+s}
$$

The conditional probability of dying within ğ‘¡ years, given that the age of ğ‘¥ + ğ‘  has been attained.

Then we have some frequently used identities:

$$
{}_{ğ‘ +ğ‘¡}ğ‘_ğ‘¥ = {}_ğ‘ ğ‘_ğ‘¥ \times {}_ğ‘¡ğ‘_{ğ‘¥+ğ‘ }
$$

$$
{}_{s|ğ‘¡}ğ‘_ğ‘¥ = {}_ğ‘ ğ‘_ğ‘¥ \times {}_ğ‘¡ğ‘_{ğ‘¥+ğ‘ }
$$

### 7.4.4. Expected Remaining Lifetime

$$
\mathring{e}_x=E(T)=\int_0^{\infty}tg(t)dt=\int_0^{\infty}{}_tp_xdt
$$

Here, ${}_tp_x$ is the probability function, times dt to be the weighted fractional lifetime, intgral to infinity to be the expectation of the future lifetime.

# 8. R

## 8.1. Misc Skill

### 8.1.1. How to add custom path

in file `Rprofile.site`, add the path

`.libPaths(c(.libPaths(), "~/userLibrary"))`

Pay attention that if the path is Windows style, `\` should be replaced by `\\`.

# 9. SQL

```sql
SELECT
    [ALL | DISTINCT | DISTINCTROW ]
    select_expr [, select_expr ...]
    [FROM table_references
        [PARTITION partition_list]
    [WHERE where_condition]
    [GROUP BY {col_name | expr | position}, ... [WITH ROLLUP]]
    [HAVING where_condition]
    [WINDOW window_name AS (window_spec)
        [, window_name AS (window_spec)] ...]
    [ORDER BY {col_name | expr | position}
        [ASC | DESC], ... [WITH ROLLUP]]
    [LIMIT {[offset,] row_count | row_count OFFSET offset}]
    [INTO OUTFILE 'file_name'
            [CHARACTER SET charset_name]
            export_options
        | INTO DUMPFILE 'file_name'
        | INTO var_name [, var_name]]
```

# 10. JavaScript

## 10.1. Data Type

### 10.1.1. Object

Object in JavaScript is like the dictionary in Python, except that the item can only be string. So we have a new object `map`, which can contain number as index.

### 10.1.2. Map

```javascript
var m = new Map([['Michael', 95], ['Bob', 75], ['Tracy', 85]]);
m.set('Dong', 39);
m.get('Michael'); // 95
```

### 10.1.3. Set

JavaScript's `Set` is quite the same as Python's `Set`.

## 10.2. Function

### 10.2.1. High Order Function

#### 10.2.1.1. map

map function can use other function to an array, so that every item in this array can use this function.

#### 10.2.1.2. reduce

reduce function can calculate array item by item and return the final value. The effect is the same as

```javascript
[x1, x2, x3, x4].reduce(f) = f(f(f(x1, x2), x3), x4)
```

It can be used as $\sum$ for sum or $\Pi$ for multiply.